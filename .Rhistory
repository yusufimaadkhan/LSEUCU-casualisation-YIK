"The University of Bristol",
"The University of Cambridge",
"Cardiff University",
"University of Durham",
"The University of Edinburgh",
"The University of Exeter",
"The University of Glasgow",
"Imperial College London",
"King's College London",
"University of Leeds",
"The University of Liverpool",
"London School of Economics and Political Science",
"The University of Manchester",
"Newcastle University",
"University of Nottingham",
"The University of Oxford",
"Queen Mary University of London",
"Queen's University Belfast",
"The University of Sheffield",
"The University of Southampton",
"University College London",
"The University of Warwick",
"The University of York"), 1, 0))
staff_and_student_df <- read_csv("HESA data/staff_and_student_df.csv") %>%
rename(HE_provider = HE.provider) %>%
mutate(rg_flag = if_else(HE_provider %in% c(
"The University of Birmingham",
"The University of Bristol",
"The University of Cambridge",
"Cardiff University",
"University of Durham",
"The University of Edinburgh",
"The University of Exeter",
"The University of Glasgow",
"Imperial College of Science, Technology and Medicine",
"King's College London",
"University of Leeds",
"The University of Liverpool",
"London School of Economics and Political Science",
"The University of Manchester",
"Newcastle University",
"University of Nottingham",
"The University of Oxford",
"Queen Mary University of London",
"Queen's University Belfast",
"The University of Sheffield",
"The University of Southampton",
"University College London",
"The University of Warwick",
"The University of York"), 1, 0)) %>%
filter(rg_flag==1) %>% select(HE_provider) %>% distinct()
staff_and_student_df <- read_csv("HESA data/staff_and_student_df.csv") %>%
rename(HE_provider = HE.provider) %>%
mutate(rg_flag = if_else(HE_provider %in% c(
"The University of Birmingham",
"The University of Bristol",
"The University of Cambridge",
"Cardiff University",
"University of Durham",
"The University of Edinburgh",
"The University of Exeter",
"The University of Glasgow",
"Imperial College of Science, Technology and Medicine",
"King's College London",
"The University of Leeds",
"The University of Liverpool",
"London School of Economics and Political Science",
"The University of Manchester",
"Newcastle University",
"University of Nottingham",
"The University of Oxford",
"Queen Mary University of London",
"Queen's University Belfast",
"The University of Sheffield",
"The University of Southampton",
"University College London",
"The University of Warwick",
"The University of York"), 1, 0)) %>%
filter(rg_flag==1) %>% select(HE_provider) %>% distinct()
library(tidyverse)
# First get the tidied dataset
staff_and_student_df <- read_csv("HESA data/staff_and_student_df.csv") %>%
rename(HE_provider = HE.provider) %>% # I'm in too deep and forgot to do clean names lmao
# Flag Russell Group
mutate(rg_flag = if_else(HE_provider %in% c(
"The University of Birmingham",
"The University of Bristol",
"The University of Cambridge",
"Cardiff University",
"University of Durham",
"The University of Edinburgh",
"The University of Exeter",
"The University of Glasgow",
"Imperial College of Science, Technology and Medicine",
"King's College London",
"The University of Leeds",
"The University of Liverpool",
"London School of Economics and Political Science",
"The University of Manchester",
"Newcastle University",
"University of Nottingham",
"The University of Oxford",
"Queen Mary University of London",
"Queen's University Belfast",
"The University of Sheffield",
"The University of Southampton",
"University College London",
"The University of Warwick",
"The University of York"), 1, 0)) %>%
#filter(rg_flag==1) %>% select(HE_provider) %>% distinct() # should have 24 Russell Group unis. Check here.
# Rename a few
mutate(HE_provider_short = case_match(HE_provider,
"London School of Economics and Political Science" ~ "LSE",
"The University of Oxford" ~ "Oxford",
"The University of Cambridge" ~ "Cambridge",
"Imperial College of Science, Technology and Medicine" ~ "Imperial",
"University College London" ~ "UCL",
"The University of Edinburgh" ~ "Edinburgh",
"King's College London" ~ "KCL",
"The University of Warwick" ~ "Warwick",
"The University of Bristol" ~ "Bristol",
"The University of Glasgow" ~ "Glasgow",
.default = HE_provider)) %>%
# ok just get rid of "The university of blah" and "University of" for everywhere. Its really annoying to search through in the dropdowns and just sounds kind of pretentious?
mutate(HE_provider_short = str_remove_all(HE_provider_short, "The University of |University of |The |the "))
# calc medians for every var and stitch onto dataset
#Stats <- summarize_all(DF, median)
#DFnew <- rbind(DF, Stats)
# Get a df with just names of HEs
he_names <- staff_and_student_df %>%
select(HE_provider_short) %>%
distinct() %>%
arrange(HE_provider_short)
# FIG 1
# Casualisation numbers
casual_numbers <- staff_and_student_df %>%
select(1:5,HE_provider_short) %>%
pivot_longer(cols = c(Open.ended.Permanent, Fixed.term),
names_to = "contract.type") %>%
mutate(contract.type = case_match(contract.type,
"Fixed.term" ~ "fixed-term",
"Open.ended.Permanent" ~ "permanent"))
# FIG 2
prop_casual_chart <- staff_and_student_df %>%
select(HE_provider, HE_provider_short, date, prop_casual) %>%
mutate(bg=if_else(HE_provider%in%c("London School of Economics and Political Science",
"The University of Oxford",
#"The University of Cambridge",
#"Imperial College of Science, Technology and Medicine",
"University College London",
"The University of Edinburgh",
#"King's College London",
"The University of Warwick",
#"The University of Bristol",
"The University of Glasgow"),1,0)) %>%
# create max and min for shading background
group_by(date,bg) %>%
mutate(high = if_else(bg==1, max(prop_casual, na.rm=T),NA),
low = if_else(bg==1, min(prop_casual, na.rm=T),NA)) %>%
ungroup() %>%
group_by(date,rg_flag) %>%
mutate(med_stat =  if_else(rg_flag==1,median(prop_casual, na.rm = T),NA),
med_lab = "Median") %>%
ungroup()
prop_casual_chart <- staff_and_student_df %>%
select(HE_provider, HE_provider_short, date, prop_casual, rg_flag) %>%
mutate(bg=if_else(HE_provider%in%c("London School of Economics and Political Science",
"The University of Oxford",
#"The University of Cambridge",
#"Imperial College of Science, Technology and Medicine",
"University College London",
"The University of Edinburgh",
#"King's College London",
"The University of Warwick",
#"The University of Bristol",
"The University of Glasgow"),1,0)) %>%
# create max and min for shading background
group_by(date,bg) %>%
mutate(high = if_else(bg==1, max(prop_casual, na.rm=T),NA),
low = if_else(bg==1, min(prop_casual, na.rm=T),NA)) %>%
ungroup() %>%
group_by(date,rg_flag) %>%
mutate(med_stat =  if_else(rg_flag==1,median(prop_casual, na.rm = T),NA),
med_lab = "Median") %>%
ungroup()
View(he_names)
staff_and_student_df <- read_csv("HESA data/staff_and_student_df.csv") %>%
rename(HE_provider = HE.provider) %>% # I'm in too deep and forgot to do clean names lmao
mutate(HE_provider = recode(HE_provider,"School of Oriental and African Studies" = "SOAS London"))
View(staff_and_student_df)
staff_and_student_df <- read_csv("HESA data/staff_and_student_df.csv") %>%
rename(HE_provider = HE.provider) %>% # I'm in too deep and forgot to do clean names lmao
mutate(HE_provider = recode(HE_provider, "SOAS University of London" = "School of Oriental and African Studies"))
View(staff_and_student_df)
staff_and_student_df <- read_csv("HESA data/staff_and_student_df.csv") %>%
rename(HE_provider = HE.provider) %>% # I'm in too deep and forgot to do clean names lmao
mutate(HE_provider = recode(HE_provider, "School of Oriental and African Studies" = "SOAS University of London"))
View(staff_and_student_df)
staff_and_student_df <- read_csv("HESA data/staff_and_student_df.csv") %>%
rename(HE_provider = HE.provider)
staff_and_student_df <- read_csv("HESA data/staff_and_student_df.csv") %>%
rename(HE_provider = HE.provider) %>% # I'm in too deep and forgot to do clean names lmao
mutate(HE_provider = recode(HE_provider, "The School of Oriental and African Studies" = "SOAS London"))
staff_and_student_df <- read_csv("HESA data/staff_and_student_df.csv") %>%
rename(HE_provider = HE.provider) %>% # I'm in too deep and forgot to do clean names lmao
mutate(HE_provider = recode(HE_provider, "The School of Oriental and African Studies" = "SOAS University of London"))
library(tidyverse)
# First get the tidied dataset
staff_and_student_df <- read_csv("HESA data/staff_and_student_df.csv") %>%
rename(HE_provider = HE.provider) %>% # I'm in too deep and forgot to do clean names lmao
# Fix issue where SOAS was called something else one year (never change ily)
mutate(HE_provider = recode(HE_provider, "The School of Oriental and African Studies" = "SOAS University of London")) %>%
# Flag Russell Group
mutate(rg_flag = if_else(HE_provider %in% c(
"The University of Birmingham",
"The University of Bristol",
"The University of Cambridge",
"Cardiff University",
"University of Durham",
"The University of Edinburgh",
"The University of Exeter",
"The University of Glasgow",
"Imperial College of Science, Technology and Medicine",
"King's College London",
"The University of Leeds",
"The University of Liverpool",
"London School of Economics and Political Science",
"The University of Manchester",
"Newcastle University",
"University of Nottingham",
"The University of Oxford",
"Queen Mary University of London",
"Queen's University Belfast",
"The University of Sheffield",
"The University of Southampton",
"University College London",
"The University of Warwick",
"The University of York"), 1, 0)) %>%
#filter(rg_flag==1) %>% select(HE_provider) %>% distinct() # should have 24 Russell Group unis. Check here.
# Rename a few
mutate(HE_provider_short = case_match(HE_provider,
"London School of Economics and Political Science" ~ "LSE",
"The University of Oxford" ~ "Oxford",
"The University of Cambridge" ~ "Cambridge",
"Imperial College of Science, Technology and Medicine" ~ "Imperial",
"University College London" ~ "UCL",
"The University of Edinburgh" ~ "Edinburgh",
"King's College London" ~ "KCL",
"The University of Warwick" ~ "Warwick",
"The University of Bristol" ~ "Bristol",
"The University of Glasgow" ~ "Glasgow",
.default = HE_provider)) %>%
# ok just get rid of "The university of blah" and "University of" for everywhere. Its really annoying to search through in the dropdowns and just sounds kind of pretentious?
mutate(HE_provider_short = str_remove_all(HE_provider_short, "The University of |University of |The |the "))
# calc medians for every var and stitch onto dataset
#Stats <- summarize_all(DF, median)
#DFnew <- rbind(DF, Stats)
# Get a df with just names of HEs
he_names <- staff_and_student_df %>%
select(HE_provider_short) %>%
distinct() %>%
arrange(HE_provider_short)
# FIG 1
# Casualisation numbers
casual_numbers <- staff_and_student_df %>%
select(1:5,HE_provider_short) %>%
pivot_longer(cols = c(Open.ended.Permanent, Fixed.term),
names_to = "contract.type") %>%
mutate(contract.type = case_match(contract.type,
"Fixed.term" ~ "fixed-term",
"Open.ended.Permanent" ~ "permanent"))
# FIG 2
prop_casual_chart <- staff_and_student_df %>%
select(HE_provider, HE_provider_short, date, prop_casual, rg_flag) %>%
mutate(bg=if_else(HE_provider%in%c("London School of Economics and Political Science",
"The University of Oxford",
#"The University of Cambridge",
#"Imperial College of Science, Technology and Medicine",
"University College London",
"The University of Edinburgh",
#"King's College London",
"The University of Warwick",
#"The University of Bristol",
"The University of Glasgow"),1,0)) %>%
# create max and min for shading background
group_by(date,bg) %>%
mutate(high = if_else(bg==1, max(prop_casual, na.rm=T),NA),
low = if_else(bg==1, min(prop_casual, na.rm=T),NA)) %>%
ungroup() %>%
group_by(date,rg_flag) %>%
mutate(rg_stat =  if_else(rg_flag==1,mean(prop_casual, na.rm = T),NA),
rg_lab = "Russell Group Average") %>%
ungroup()
boxdata_chart <- prop_casual_chart_convert %>%
mutate(rg_flag = recode(rg_flag, 0 = "Yes",
boxdata_chart <- prop_casual_chart_convert %>%
mutate(rg_flag = recode(rg_flag, 1 = "Yes",
boxdata_chart <- prop_casual_chart_convert %>%
mutate(rg_boxplot_flag = if_else(rg_flag==1, "Yes", "NO"))
boxdata_chart <- prop_casual_chart %>%
mutate(rg_boxplot_flag = if_else(rg_flag==1, "Yes", "No"))
View(boxdata_chart)
boxdata_chart <- prop_casual_chart %>%
mutate(rg_boxplot_flag = if_else(rg_flag==1, "Yes", "No")) %>%
sekect(1:4, rg_boxplot_flag)
boxdata_chart <- prop_casual_chart %>%
mutate(rg_boxplot_flag = if_else(rg_flag==1, "Yes", "No")) %>%
select(1:4, rg_boxplot_flag)
View(boxdata_chart)
boxdata_chart <- prop_casual_chart %>%
mutate(rg_boxplot_flag = if_else(rg_flag==1, "Yes", "No")) %>%
select(1:4, rg_boxplot_flag) %>%
filter(!HE_provider_short=="Court Theatre Training Company Ltd", # big outlier of 100% temo contracts - omitted for visibility. But if its real??? whats going on
!prop_casual = 0)
boxdata_chart <- prop_casual_chart %>%
mutate(rg_boxplot_flag = if_else(rg_flag==1, "Yes", "No")) %>%
select(1:4, rg_boxplot_flag) %>%
filter(!HE_provider_short=="Court Theatre Training Company Ltd", # big outlier of 100% temo contracts - omitted for visibility. But if its real??? whats going on
!prop_casual== 0)
library(tidyverse)
# First get the tidied dataset
staff_and_student_df <- read_csv("HESA data/staff_and_student_df.csv") %>%
rename(HE_provider = HE.provider) %>% # I'm in too deep and forgot to do clean names lmao
# Fix issue where SOAS was called something else one year (never change ily)
mutate(HE_provider = recode(HE_provider, "The School of Oriental and African Studies" = "SOAS University of London")) %>%
# Flag Russell Group
mutate(rg_flag = if_else(HE_provider %in% c(
"The University of Birmingham",
"The University of Bristol",
"The University of Cambridge",
"Cardiff University",
"University of Durham",
"The University of Edinburgh",
"The University of Exeter",
"The University of Glasgow",
"Imperial College of Science, Technology and Medicine",
"King's College London",
"The University of Leeds",
"The University of Liverpool",
"London School of Economics and Political Science",
"The University of Manchester",
"Newcastle University",
"University of Nottingham",
"The University of Oxford",
"Queen Mary University of London",
"Queen's University Belfast",
"The University of Sheffield",
"The University of Southampton",
"University College London",
"The University of Warwick",
"The University of York"), 1, 0)) %>%
#filter(rg_flag==1) %>% select(HE_provider) %>% distinct() # should have 24 Russell Group unis. Check here.
# Rename a few
mutate(HE_provider_short = case_match(HE_provider,
"London School of Economics and Political Science" ~ "LSE",
"The University of Oxford" ~ "Oxford",
"The University of Cambridge" ~ "Cambridge",
"Imperial College of Science, Technology and Medicine" ~ "Imperial",
"University College London" ~ "UCL",
"The University of Edinburgh" ~ "Edinburgh",
"King's College London" ~ "KCL",
"The University of Warwick" ~ "Warwick",
"The University of Bristol" ~ "Bristol",
"The University of Glasgow" ~ "Glasgow",
.default = HE_provider)) %>%
# ok just get rid of "The university of blah" and "University of" for everywhere. Its really annoying to search through in the dropdowns and just sounds kind of pretentious?
mutate(HE_provider_short = str_remove_all(HE_provider_short, "The University of |University of |The |the "))
# calc medians for every var and stitch onto dataset
#Stats <- summarize_all(DF, median)
#DFnew <- rbind(DF, Stats)
# Get a df with just names of HEs
he_names <- staff_and_student_df %>%
select(HE_provider_short) %>%
distinct() %>%
arrange(HE_provider_short)
# FIG 1
# Casualisation numbers
casual_numbers <- staff_and_student_df %>%
select(1:5,HE_provider_short) %>%
pivot_longer(cols = c(Open.ended.Permanent, Fixed.term),
names_to = "contract.type") %>%
mutate(contract.type = case_match(contract.type,
"Fixed.term" ~ "fixed-term",
"Open.ended.Permanent" ~ "permanent"))
# FIG 2
prop_casual_chart <- staff_and_student_df %>%
select(HE_provider, HE_provider_short, date, prop_casual, rg_flag) %>%
mutate(bg=if_else(HE_provider%in%c("London School of Economics and Political Science",
"The University of Oxford",
#"The University of Cambridge",
#"Imperial College of Science, Technology and Medicine",
"University College London",
"The University of Edinburgh",
#"King's College London",
"The University of Warwick",
#"The University of Bristol",
"The University of Glasgow"),1,0)) %>%
# create max and min for shading background
group_by(date,bg) %>%
mutate(high = if_else(bg==1, max(prop_casual, na.rm=T),NA),
low = if_else(bg==1, min(prop_casual, na.rm=T),NA)) %>%
ungroup() %>%
group_by(date,rg_flag) %>%
mutate(rg_stat =  if_else(rg_flag==1,mean(prop_casual, na.rm = T),NA),
rg_lab = "Russell Group Average") %>%
ungroup()
# FIG 3
prop_change_perm <- staff_and_student_df %>%
select(HE_provider, HE_provider_short, date, Open.ended.Permanent, rg_flag) %>%
mutate(bg=if_else(HE_provider%in%c("London School of Economics and Political Science",
"The University of Oxford",
"The University of Cambridge",
#"Imperial College of Science, Technology and Medicine",
#"University College London",
"The University of Edinburgh",
"King's College London",
#"The University of Warwick",
"The University of Bristol",
"The University of Glasgow"),1,0)) %>%
# create max and min for shading background
group_by(date,bg) %>%
mutate(high = if_else(bg==1, max(Open.ended.Permanent, na.rm=T),NA),
low = if_else(bg==1, min(Open.ended.Permanent, na.rm=T),NA)) %>%
ungroup() %>%
group_by(date,rg_flag) %>%
mutate(rg_stat =  if_else(rg_flag==1,mean(Open.ended.Permanent, na.rm = T),NA),
rg_lab = "Russell Group Average") %>%
ungroup()
# FIG 4
staff_student_chart <- staff_and_student_df %>%
select(HE_provider, HE_provider_short, date, staffstudent_ratio, rg_flag) %>%
mutate(bg=if_else(HE_provider%in%c("London School of Economics and Political Science",
"The University of Oxford",
"The University of Cambridge",
#"Imperial College of Science, Technology and Medicine",
"University College London",
"The University of Edinburgh",
#"King's College London",
"The University of Warwick",
"The University of Bristol",
"The University of Glasgow"),1,0))%>%
# create max and min for shading background
group_by(date,bg) %>%
mutate(high = if_else(bg==1, max(staffstudent_ratio, na.rm=T),NA),
low = if_else(bg==1, min(staffstudent_ratio, na.rm=T),NA)) %>%
ungroup() %>%
group_by(date,rg_flag) %>%
mutate(rg_stat =  if_else(rg_flag==1,mean(staffstudent_ratio, na.rm = T),NA),
rg_lab = "Russell Group Average") %>%
ungroup()
# FIG 5
student_nb_chart <- staff_and_student_df %>%
select(HE_provider, HE_provider_short, date, Total, rg_flag) %>%
mutate(bg=if_else(HE_provider%in%c("London School of Economics and Political Science",
"The University of Oxford",
"The University of Cambridge",
"Imperial College of Science, Technology and Medicine",
"University College London",
#"The University of Edinburgh",
#"King's College London",
#"The University of Warwick",
"The University of Bristol",
"The University of Glasgow"),1,0))%>%
# create max and min for shading background
group_by(date,bg) %>%
mutate(high = if_else(bg==1, max(Total, na.rm=T),NA),
low = if_else(bg==1, min(Total, na.rm=T),NA)) %>%
ungroup() %>%
group_by(date,rg_flag) %>%
mutate(rg_stat =  if_else(rg_flag==1,mean(Total, na.rm = T),NA),
rg_lab = "Russell Group Average") %>%
ungroup()
# FIG 6
prop_non_uk_student_chart <- staff_and_student_df %>%
select(HE_provider, HE_provider_short, date, prop_non_uk, rg_flag) %>%
mutate(bg=if_else(HE_provider%in%c("London School of Economics and Political Science",
"The University of Oxford",
"The University of Cambridge",
#"Imperial College of Science, Technology and Medicine",
"University College London",
"The University of Edinburgh",
#"King's College London",
"The University of Warwick",
"The University of Bristol"
#"The University of Glasgow"
),1,0))%>%
# create max and min for shading background
group_by(date,bg) %>%
mutate(high = if_else(bg==1, max(prop_non_uk, na.rm=T),NA),
low = if_else(bg==1, min(prop_non_uk, na.rm=T),NA)) %>%
ungroup() %>%
group_by(date,rg_flag) %>%
mutate(rg_stat =  if_else(rg_flag==1,mean(prop_non_uk, na.rm = T),NA),
rg_lab = "Russell Group Average") %>%
ungroup()
# Boxplot thing
boxdata_chart <- prop_casual_chart %>%
mutate(rg_boxplot_flag = if_else(rg_flag==1, "Yes", "No")) %>%
select(1:4, rg_boxplot_flag) %>%
filter(!HE_provider_short=="Court Theatre Training Company Ltd", # big outlier of 100% temo contracts - omitted for visibility. But if its real??? whats going on
!prop_casual==0)
View(boxdata_chart)
View(staff_student_chart)
boxdata_chart <- prop_casual_chart %>%
mutate(rg_boxplot_flag = if_else(rg_flag==1, "Yes", "No")) %>%
select(1:4, rg_boxplot_flag)
View(casual_numbers)
View(staff_student_chart)
library(tidyverse)
# First get the tidied dataset
staff_and_student_df <- read_csv("HESA data/staff_and_student_df.csv")
View(staff_and_student_df)
